<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Cocos2dx," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Cocos2dx自定义了三种数据结构，用于存储数据。">
<meta property="og:type" content="article">
<meta property="og:title" content="Cocos2dx学习笔记（18）——Cocos数据结构">
<meta property="og:url" content="http://yoursite.com/2016/09/13/Cocos2dx-note-18/index.html">
<meta property="og:site_name" content="先哥哥<(^ - ^)/">
<meta property="og:description" content="Cocos2dx自定义了三种数据结构，用于存储数据。">
<meta property="og:updated_time" content="2016-12-06T03:13:31.561Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cocos2dx学习笔记（18）——Cocos数据结构">
<meta name="twitter:description" content="Cocos2dx自定义了三种数据结构，用于存储数据。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6316601514345367000,
      author: '先哥哥'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/09/13/Cocos2dx-note-18/"/>

  <title> Cocos2dx学习笔记（18）——Cocos数据结构 | 先哥哥<(^ - ^)/ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-82195042-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">先哥哥<(^ - ^)/</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">二年级生~</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', '6g6uJxAMRsEqayhdJAk5','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Cocos2dx学习笔记（18）——Cocos数据结构
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-13T11:08:37+08:00" content="2016-09-13">
              2016-09-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Cocos2dx/" itemprop="url" rel="index">
                    <span itemprop="name">Cocos2dx</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/13/Cocos2dx-note-18/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/13/Cocos2dx-note-18/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Cocos2dx自定义了三种数据结构，用于存储数据。<br><a id="more"></a></p>
<blockquote>
<p><strong>本文仅供个人记录和复习，不用于其他用途</strong></p>
</blockquote>
<h2 id="2-x与3-x"><a href="#2-x与3-x" class="headerlink" title="2.x与3.x"></a><strong>2.x与3.x</strong></h2><p>2.x版本：</p>
<ul>
<li><code>CCArray</code></li>
<li><code>CCDictionary</code></li>
<li><code>CCString</code></li>
</ul>
<p>3.x版本：</p>
<ul>
<li><code>Vector</code></li>
<li><code>Map</code></li>
<li><code>Value</code></li>
</ul>
<h2 id="CCArray"><a href="#CCArray" class="headerlink" title="CCArray"></a><strong>CCArray</strong></h2><p>看名字就能知道大概的意思，这个是Cocos自定义的数组，方便存储Cocos中的数组型数据。</p>
<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a><strong>创建</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 创建一个数组</span></div><div class="line"><span class="function"><span class="keyword">static</span> CCArray* <span class="title">create</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// 使用一些对象创建数组</span></div><div class="line"><span class="function"><span class="keyword">static</span> CCArray* <span class="title">create</span><span class="params">(CCObject* pObject, …)</span></span>;</div><div class="line"><span class="comment">// 使用一个对象创建数组</span></div><div class="line"><span class="function"><span class="keyword">static</span> CCArray* <span class="title">createWithObject</span><span class="params">(CCObject* pObject)</span></span>;</div><div class="line"><span class="comment">// 创建一个指定大小的数组</span></div><div class="line"><span class="function"><span class="keyword">static</span> CCArray* <span class="title">createWithCapacity</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> capacity)</span></span>;</div><div class="line"><span class="comment">// 使用一个现有的CCArray数组来新建一个数组</span></div><div class="line"><span class="function"><span class="keyword">static</span> CCArray* <span class="title">createWithArray</span><span class="params">(CCArray* otherArray)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a><strong>插入</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 插入一个对象</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">addObject</span><span class="params">(CCObject* object)</span></span>;</div><div class="line"><span class="comment">// 插入别外一个数组里面的全部对象</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">addObjectsFromArray</span><span class="params">(CCArray* otherArray)</span></span>;</div><div class="line"><span class="comment">// 在一个确定的索引位置插入一个对象</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertObject</span><span class="params">(CCObject* object, <span class="keyword">unsigned</span> <span class="keyword">int</span> index)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a><strong>删除</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 移除最后的一个对象</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeLastObject</span><span class="params">(<span class="keyword">bool</span> bReleaseObj = <span class="literal">true</span>)</span></span>;</div><div class="line"><span class="comment">// 移除一个确定的对象</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeObject</span><span class="params">(CCObject* object, <span class="keyword">bool</span> bReleaseObj = <span class="literal">true</span>)</span></span>;</div><div class="line"><span class="comment">// 移除一个确定索引位置的元素</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeObjectAtIndex</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> index, <span class="keyword">bool</span> bReleaseObj = <span class="literal">true</span>)</span></span>;</div><div class="line"><span class="comment">// 移除全部元素</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeObjectsInArray</span><span class="params">(CCArray* otherArray)</span></span>;</div><div class="line"><span class="comment">// 移除所有对象</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeAllObjects</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// 快速移除一个对象</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fastRemoveObject</span><span class="params">(CCObject* object)</span></span>;</div><div class="line"><span class="comment">// 快速移除一个确定索引位置的对象</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">fastRemoveObjectAtIndex</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> index)</span></span>;</div></pre></td></tr></table></figure>
<p><code>remove</code>和<code>fastRemove</code>的区别在于，<code>remove</code>将元素删除，后面的元素向前移动。而<code>fastRemove</code>只是释放了对应元素，整体的结构没变。</p>
<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a><strong>遍历</strong></h3><p>遍历用到的是<code>CCARRAY_FOREACH(arr, obj)</code>这个宏，有正向和逆向之分：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> CCARRAY_FOREACH(__array__, __object__)                                                                         \  </span></div><div class="line">    <span class="keyword">if</span> ((<span class="number">__</span>array__) &amp;&amp; (<span class="number">__</span>array__)-&gt;data-&gt;num &gt; <span class="number">0</span>)                                                                     \  </div><div class="line">    <span class="keyword">for</span>(CCObject** <span class="number">__</span>arr__ = (<span class="number">__</span>array__)-&gt;data-&gt;arr, **<span class="number">__</span>end__ = (<span class="number">__</span>array__)-&gt;data-&gt;arr + (<span class="number">__</span>array__)-&gt;data-&gt;num<span class="number">-1</span>;    \  </div><div class="line">    <span class="number">__</span>arr__ &lt;= <span class="number">__</span>end__ &amp;&amp; (((<span class="number">__</span>object__) = *<span class="number">__</span>arr__) != <span class="literal">NULL</span><span class="comment">/* || true*/</span>);                                             \  </div><div class="line">    <span class="number">__</span>arr__++)</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> CCARRAY_FOREACH_REVERSE(__array__, __object__)                                                                  \  </span></div><div class="line">    <span class="keyword">if</span> ((<span class="number">__</span>array__) &amp;&amp; (<span class="number">__</span>array__)-&gt;data-&gt;num &gt; <span class="number">0</span>)                                                                      \  </div><div class="line">    <span class="keyword">for</span>(CCObject** <span class="number">__</span>arr__ = (<span class="number">__</span>array__)-&gt;data-&gt;arr + (<span class="number">__</span>array__)-&gt;data-&gt;num<span class="number">-1</span>, **<span class="number">__</span>end__ = (<span class="number">__</span>array__)-&gt;data-&gt;arr;     \  </div><div class="line">    <span class="number">__</span>arr__ &gt;= <span class="number">__</span>end__ &amp;&amp; (((<span class="number">__</span>object__) = *<span class="number">__</span>arr__) != <span class="literal">NULL</span><span class="comment">/* || true*/</span>);                                              \  </div><div class="line">    <span class="number">__</span>arr__--)</div></pre></td></tr></table></figure>
<p>上面这个是3.x版本的代码，但是基本思路是一样的。</p>
<h3 id="操作元素"><a href="#操作元素" class="headerlink" title="操作元素"></a><strong>操作元素</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 返回元素个数</span></div><div class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="comment">// 返回array容量</span></div><div class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">capacity</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="comment">// 返回指定CCObject的位置，如果不存在返回UINT_MAX</span></div><div class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">indexOfObject</span><span class="params">(CCObject* object)</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="comment">// 返回指定位置的CCObject</span></div><div class="line"><span class="function">CCObject* <span class="title">objectAtIndex</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> index)</span></span>;</div><div class="line"><span class="comment">// 返回最后一个元素</span></div><div class="line"><span class="function">CCObject* <span class="title">lastObject</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// 返回随机元素  </span></div><div class="line"><span class="function">CCObject* <span class="title">randomObject</span><span class="params">()</span></span>;  </div><div class="line"><span class="comment">// 返回某个元素是否存在于array中  </span></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">containsObject</span><span class="params">(CCObject* object)</span> <span class="keyword">const</span></span>;  </div><div class="line"><span class="comment">// 判断array是否相等  </span></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isEqualToArray</span><span class="params">(CCArray* pOtherArray)</span></span>;</div></pre></td></tr></table></figure>
<p>注意，容量和个数是不一样的，个数&lt;=容量，添加元素前会先判断是否要增加容量。</p>
<h3 id="操作CCArray内容"><a href="#操作CCArray内容" class="headerlink" title="操作CCArray内容"></a><strong>操作CCArray内容</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 交换2个元素  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">exchangeObject</span><span class="params">(CCObject* object1, CCObject* object2)</span></span>;  </div><div class="line"><span class="comment">// 交换2个指定位置元素  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">exchangeObjectAtIndex</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> index1, <span class="keyword">unsigned</span> <span class="keyword">int</span> index2)</span></span>;  </div><div class="line"><span class="comment">// 用一个对象替代指定位置元素  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">replaceObjectAtIndex</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> uIndex, CCObject* pObject, <span class="keyword">bool</span> bReleaseObject = <span class="literal">true</span>)</span></span>;  </div><div class="line"><span class="comment">// 反转array  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">reverseObjects</span><span class="params">()</span></span>;  </div><div class="line"><span class="comment">// 收缩array内存以匹配元素个数  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">reduceMemoryFootprint</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<h3 id="判等"><a href="#判等" class="headerlink" title="判等"></a><strong>判等</strong></h3><p>判断2个CCArray是否相等使用<code>isEqualToArray()</code>，判断相等的条件是<code>CCArray</code>中的每个元素相等即可，与<code>CCArray</code>的容量无关。</p>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a><strong>代码实现</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 初始化</span></div><div class="line">CCArray* pArray;</div><div class="line">pArray = createWithCapacity(<span class="number">100</span>);</div><div class="line">pArray = CCArray::create(); </div><div class="line"></div><div class="line"><span class="comment">// 添加元素</span></div><div class="line">CCSprite* pRet = CCSprite::create(<span class="string">"test.png"</span>);</div><div class="line">pArray-&gt;addObject(pRet);</div><div class="line"></div><div class="line"><span class="comment">// 删除元素</span></div><div class="line">pArray-&gt;removeObject(pRet);      <span class="comment">// 第二参数为是否调用release,默认为true</span></div><div class="line">pArray-&gt;removeObjectAtIndex(<span class="number">0</span>);  <span class="comment">// 删除o位置上的元素</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeObjectAtIndex</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> index, <span class="keyword">bool</span> bReleaseObj = <span class="literal">true</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeAllObjects</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="comment">// 遍历</span></div><div class="line">CCMenuItem *item = CCMenuItemFont::create(menu_array[i], <span class="keyword">this</span>, menu_selector(TMenu::menuCallBack));</div><div class="line">CCMenu *menu = CCMenu::create();</div><div class="line">menu-&gt;addChild(item);</div><div class="line"></div><div class="line">CCArray *<span class="built_in">array</span> = menu-&gt;getChildren();</div><div class="line">CCObject *obj;</div><div class="line">CCARRAY_FOREACH(<span class="built_in">array</span>, obj)</div><div class="line">&#123;</div><div class="line">    CCMenuItem *item = (CCMenuItem *)obj;</div><div class="line">    item-&gt;setTag(i + <span class="number">1</span> + <span class="number">10000</span>);</div><div class="line">    i++;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>遍历的操作已经用宏定义好了，我们只需要编写相应的代码即可。</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a><strong>注意事项</strong></h3><p><code>CCArray</code>不会使用<code>addChild()</code>加到其他类，所以它的引用计数是1，而且被设置为自动释放。所以创建<code>CCArray</code>对象时要记得调用<code>retain</code>，而且在析构的时候也要调用<code>release</code>来释放内存。</p>
<h2 id="CCDictionary"><a href="#CCDictionary" class="headerlink" title="CCDictionary"></a><strong>CCDictionary</strong></h2><p><code>CCDictionary</code>支持两种类型的关键字，一个是<code>std::string</code>，一个是<code>int</code>。一个<code>CCDictionary</code>实例对象只支持唯一的关键字。所以在你调用<code>setObject</code>方法的时候，你需要确认一下。</p>
<h3 id="key"><a href="#key" class="headerlink" title="key"></a><strong>key</strong></h3><p><code>CCDictionary</code>只支持整型和字符串型这两种类型，<code>key</code>的作用主要是方便取出对应元素。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">enum</span> CCDictType  </div><div class="line">&#123;  </div><div class="line">    kCCDictUnknown = <span class="number">0</span>,  </div><div class="line">    kCCDictStr,  </div><div class="line">    kCCDictInt  </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="CCDictElement"><a href="#CCDictElement" class="headerlink" title="CCDictElement"></a><strong>CCDictElement</strong></h3><p><code>CCDictElement</code>是<code>CCDictionary</code>的一个元素，包含了一个<code>key-value</code>。<code>key</code>支持整型和字符串，使用的时候要注意在同一个<code>CCDictionary</code>中<code>key</code>类型必须要一致，<code>value</code>可以不一致。总的来讲，要么<code>key</code>都是字符串，要么都是整型，不能都有：</p>
<h3 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a><strong>创建</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 创建一个CCDictionary  </span></div><div class="line"><span class="function"><span class="keyword">static</span> CCDictionary* <span class="title">create</span><span class="params">()</span></span>;  </div><div class="line"><span class="comment">// 用一个已存在的CCDictionary来创建一个新的CCDictionary  </span></div><div class="line"><span class="function"><span class="keyword">static</span> CCDictionary* <span class="title">createWithDictionary</span><span class="params">(CCDictionary* srcDict)</span></span>;  </div><div class="line"><span class="comment">// 用一个plist来创建CCDictionary  </span></div><div class="line"><span class="function"><span class="keyword">static</span> CCDictionary* <span class="title">createWithContentsOfFile</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pFileName)</span></span>;  </div><div class="line"><span class="comment">// 返回一个非autorelease对象的CCDictionary，它讷讷感够确保在新线程中使用  </span></div><div class="line"><span class="comment">// 但是你必须手动管理它的生命周期，当你不再需要它的时候，必须调用CC_SAFE_RELEASE  </span></div><div class="line"><span class="function"><span class="keyword">static</span> CCDictionary* <span class="title">createWithContentsOfFileThreadSafe</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pFileName)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a><strong>查找</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 返回指定字符串类型key的value，如果CCDictionary的key是整型，会出现断言  </span></div><div class="line"><span class="function">CCObject* <span class="title">objectForKey</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; key)</span></span>;  </div><div class="line"><span class="comment">// 返回指定整型key的value，如果CCDictionary的key是字符串型，会出现断言  </span></div><div class="line"><span class="function">CCObject* <span class="title">objectForKey</span><span class="params">(<span class="keyword">intptr_t</span> key)</span></span>;  </div><div class="line"><span class="comment">// 返回指定字符串类型key的CCString，这里假定value是CCString型，如果不是或者未找到，则返回空串  </span></div><div class="line"><span class="function"><span class="keyword">const</span> CCString* <span class="title">valueForKey</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; key)</span></span>;  </div><div class="line"><span class="comment">// 返回指定整型类型key的CCString，这里假定value是CCString型，如果不是或者未找到，则返回空串  </span></div><div class="line"><span class="function"><span class="keyword">const</span> CCString* <span class="title">valueForKey</span><span class="params">(<span class="keyword">intptr_t</span> key)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="增加"><a href="#增加" class="headerlink" title="增加"></a><strong>增加</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 插入一个key-value，如果是第一次调用，那么CCDictionary的key类型会被确定为字符串型，之后就不能插入整型key  </span></div><div class="line"><span class="comment">// 如果已存在该key，则旧key-value会被释放和移除，被新的替代  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setObject</span><span class="params">(CCObject* pObject, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; key)</span></span>;  </div><div class="line"><span class="comment">// 插入一个key-value，如果是第一次调用，那么CCDictionary的key类型会被确定为整型，之后就不能插入字符串型key  </span></div><div class="line"><span class="comment">// 如果已存在该key，则旧key-value会被释放和移除，被新的替代  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setObject</span><span class="params">(CCObject* pObject, <span class="keyword">intptr_t</span> key)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="移除"><a href="#移除" class="headerlink" title="移除"></a><strong>移除</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 移除指定key  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeObjectForKey</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; key)</span></span>;  </div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeObjectForKey</span><span class="params">(<span class="keyword">intptr_t</span> key)</span></span>;  </div><div class="line"><span class="comment">// 移除一个CCArray中keys  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeObjectsForKeys</span><span class="params">(CCArray* pKeyArray)</span></span>;  </div><div class="line"><span class="comment">// 通过元素来移除value  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeObjectForElememt</span><span class="params">(CCDictElement* pElement)</span></span>;  </div><div class="line"><span class="comment">// 移除所有的key-value  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeAllObjects</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<h3 id="其他操作"><a href="#其他操作" class="headerlink" title="其他操作"></a><strong>其他操作</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 返回一个随机元素，这个使用得注意，因为value可以不一样，所以返回类型每次都可能不同，在类型转换的时候要非常小心      </span></div><div class="line"><span class="function">CCObject* <span class="title">randomObject</span><span class="params">()</span></span>;  </div><div class="line"><span class="comment">// 返回一个包含所有key的CCArray  </span></div><div class="line"><span class="function">CCArray* <span class="title">allKeys</span><span class="params">()</span></span>;  </div><div class="line"><span class="comment">// 返回指定value的所有key，因为value是可以相同的，内部使用==比较两个value是否相同   </span></div><div class="line"><span class="function">CCArray* <span class="title">allKeysForObject</span><span class="params">(CCObject* object)</span></span>;  </div><div class="line"><span class="comment">// 返回元素个数  </span></div><div class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">()</span></span>;  </div><div class="line"><span class="comment">// 把CCDictionary写到一个plist中，写入的value要求是字符串型  </span></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">writeToFile</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *fullPath)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="遍历-1"><a href="#遍历-1" class="headerlink" title="遍历"></a><strong>遍历</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> CCDICT_FOREACH(__dict__, __el__) \  </span></div><div class="line">    CCDictElement* pTmp##<span class="number">__</span>dict__##<span class="number">__</span>el__ = <span class="literal">NULL</span>; \  </div><div class="line">    <span class="keyword">if</span> (<span class="number">__</span>dict__) \  </div><div class="line">    HASH_ITER(hh, (<span class="number">__</span>dict__)-&gt;m_pElements, <span class="number">__</span>el__, pTmp##<span class="number">__</span>dict__##<span class="number">__</span>el__)</div></pre></td></tr></table></figure>
<h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a><strong>代码示例</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Create a dictionary, return an autorelease object.  </span></div><div class="line">CCDictionary* pDict = CCDictionary::create();  </div><div class="line">  </div><div class="line"><span class="comment">// Insert objects to dictionary  </span></div><div class="line">CCString* pValue1 = CCString::create(<span class="string">"100"</span>);  </div><div class="line">CCString* pValue2 = CCString::create(<span class="string">"120"</span>);  </div><div class="line">CCInteger* pValue3 = CCInteger::create(<span class="number">200</span>);  </div><div class="line">pDict-&gt;setObject(pValue1, <span class="string">"key1"</span>);  </div><div class="line">pDict-&gt;setObject(pValue2, <span class="string">"key2"</span>);  </div><div class="line">pDict-&gt;setObject(pValue3, <span class="string">"key3"</span>);  </div><div class="line">  </div><div class="line"><span class="comment">// Get the object for key  </span></div><div class="line">CCString* pStr1 = (CCString*)pDict-&gt;objectForKey(<span class="string">"key1"</span>);  </div><div class="line">CCLog(<span class="string">"&#123; key1: %s &#125;"</span>, pStr1-&gt;getCString());  </div><div class="line">CCInteger* pInteger = (CCInteger*)pDict-&gt;objectForKey(<span class="string">"key3"</span>);  </div><div class="line">CCLog(<span class="string">"&#123; key3: %d &#125;"</span>, pInteger-&gt;getValue());  </div><div class="line">CCString* pStr3=<span class="keyword">static_cast</span>&lt;CCString*&gt;(pDict-&gt;randomObject());  <span class="comment">// 这里有问题了，因为value有不同类型，所以随机返回时类型处理要小心  </span></div><div class="line">CCLog(<span class="string">"&#123; random key: %s &#125;"</span>,pStr3-&gt;getCString());                <span class="comment">// 如果返回的是整型pValue3，那么会出现断言  </span></div><div class="line"><span class="keyword">if</span>(pDict-&gt;writeToFile(<span class="string">"pdic.plist"</span>))                            <span class="comment">// 整型的value无法写入，会提示This type cannot appear in property list  </span></div><div class="line">    CCLog(<span class="string">"Write to file success!"</span>);</div><div class="line"></div><div class="line"><span class="comment">// 遍历</span></div><div class="line">CCDictElement* pElement;  </div><div class="line">CCDICT_FOREACH(dict, pElement)  </div><div class="line">&#123;  </div><div class="line">    <span class="keyword">const</span> <span class="keyword">char</span>*key = pElement-&gt;getStrKey();  </div><div class="line">    <span class="comment">// You certainly know the type of value, so we assume that it's a CCSprite.  </span></div><div class="line">    CCSprite* pSprite = (CCSprite*)pElement-&gt;getObject();  </div><div class="line">    <span class="comment">// ......  </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="CCString"><a href="#CCString" class="headerlink" title="CCString"></a><strong>CCString</strong></h2><p><code>CCString</code>是自动释放的，除非你<code>retian</code>了。</p>
<h3 id="创建-2"><a href="#创建-2" class="headerlink" title="创建"></a><strong>创建</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 可以传递c字符串指针</span></div><div class="line"><span class="function"><span class="keyword">static</span> CCString* <span class="title">create</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; str)</span></span>;</div><div class="line"><span class="comment">// 该方法与sprintf类似</span></div><div class="line"><span class="function"><span class="keyword">static</span> CCString* <span class="title">createWithFormat</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* format, …)</span></span>;</div><div class="line"><span class="comment">// 使用二进制数据创建</span></div><div class="line"><span class="function"><span class="keyword">static</span> CCString* <span class="title">createWithData</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span>* pData, <span class="keyword">unsigned</span> <span class="keyword">long</span> nLen)</span></span>;</div><div class="line"><span class="comment">// 使用文件来创建</span></div><div class="line"><span class="function"><span class="keyword">static</span> CCString* <span class="title">createWithContentsOfFile</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* pszFileName)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="转换"><a href="#转换" class="headerlink" title="转换"></a><strong>转换</strong></h3><p><code>CCString</code>可以转换成其他类型的变量：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">intValue</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">uintValue</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="function"><span class="keyword">float</span> <span class="title">floatValue</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">doubleValue</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">boolValue</span><span class="params">()</span> <span class="keyword">const</span></span>;</div></pre></td></tr></table></figure>
<h3 id="常用宏定义"><a href="#常用宏定义" class="headerlink" title="常用宏定义"></a><strong>常用宏定义</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> CCStringMake(str) CCString::create(str)</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ccs CCStringMake</span></div><div class="line"></div><div class="line">CCArray *stringArray = CCArray::create(</div><div class="line"></div><div class="line">    ccs(<span class="string">"Hello"</span>),</div><div class="line"></div><div class="line">    ccs(<span class="string">"Variable"</span>),</div><div class="line"></div><div class="line">    ccs(<span class="string">"Size"</span>),</div><div class="line"></div><div class="line">    ccs(<span class="string">"!"</span>),</div><div class="line"></div><div class="line">    <span class="literal">NULL</span>);</div></pre></td></tr></table></figure>
<p>这样我们可以方便地创建许多<code>CCString</code>对象。</p>
<h2 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a><strong>Vector</strong></h2><p><code>Vector<t></t></code>类似于C++标准库中的<code>vector</code>，用于替代<code>CCArray</code>。<code>Vector</code>是一个可以动态增长的容器，按照一定的顺序存储数据。<code>T</code>必须是继承自<code>Ref</code>的指针，其他类型（包括基本类型）都不能作为模板参数。实例化<code>Vector</code>对象时，一般在栈上实例化，所以不用担心内存释放的问题。<code>Vector</code>不是继承自<code>Ref</code>，不能使用<code>retain</code>和<code>release</code>进行内存管理。</p>
<p><strong>注意，<code>Vector</code>没有重载[]，不能使用下标来获取对象</strong>。</p>
<h3 id="创建-3"><a href="#创建-3" class="headerlink" title="创建"></a><strong>创建</strong></h3><p>为了演示，这里先创建两个精灵：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">auto</span> sp1 = Sprite::create(<span class="string">"CloseNormal.png"</span>);  </div><div class="line">sp1-&gt;setPosition(Point(<span class="number">100</span>,<span class="number">100</span>));  </div><div class="line"><span class="keyword">this</span>-&gt;addChild(sp1,<span class="number">1</span>);  </div><div class="line">  </div><div class="line"><span class="keyword">auto</span> sp2 = Sprite::create(<span class="string">"CloseSelected.png"</span>);  </div><div class="line">sp2-&gt;setPosition(Point(<span class="number">100</span>,<span class="number">200</span>));  </div><div class="line"><span class="keyword">this</span>-&gt;addChild(sp2,<span class="number">1</span>);</div></pre></td></tr></table></figure>
<p>创建容器，将精灵加入：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Vector&lt;Sprite*&gt; sp_vec;</div><div class="line"></div><div class="line">sp_vec.pushBack(sp1);</div><div class="line">sp_vec.pushBack(sp2);</div></pre></td></tr></table></figure>
<h3 id="获取容器大小"><a href="#获取容器大小" class="headerlink" title="获取容器大小"></a><strong>获取容器大小</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> count = sp_vec.size();</div></pre></td></tr></table></figure>
<h3 id="遍历-2"><a href="#遍历-2" class="headerlink" title="遍历"></a><strong>遍历</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>( <span class="keyword">auto</span>&amp; e : sp_vec)</div><div class="line">&#123;</div><div class="line">    e-&gt;runAction(MoveTo::create(<span class="number">0.2f</span>, Point(<span class="number">100</span>,<span class="number">100</span>)));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="删除容器中的精灵"><a href="#删除容器中的精灵" class="headerlink" title="删除容器中的精灵"></a><strong>删除容器中的精灵</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 删除最后一个精灵</span></div><div class="line">sp_vec.popBack();</div><div class="line"></div><div class="line"><span class="comment">// 删除指定的精灵</span></div><div class="line">sp_vec.eraseObject(sp1);</div><div class="line"></div><div class="line"><span class="comment">//删除所有对象</span></div><div class="line">sp_vec.clear();</div></pre></td></tr></table></figure>
<h3 id="其他用法"><a href="#其他用法" class="headerlink" title="其他用法"></a><strong>其他用法</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 在容器中的任何一个位置插入对象：  </span></div><div class="line">sp_vec.pushBack(sp1);  </div><div class="line">sp_vec.pushBack(sp2);  </div><div class="line"><span class="comment">// 目前的情况是，sp1在容器的第一个位置，sp2在容器的第二个位置，这时候我们要将sp3放入第一个位置：  </span></div><div class="line">sp_vec.insert(<span class="number">0</span>,sp3);<span class="comment">//ok  </span></div><div class="line">  </div><div class="line"><span class="comment">// 查找容器中的对象：  </span></div><div class="line"><span class="comment">// 假设不知道容器中是否有sp3这个精灵，这时候可以这样：  </span></div><div class="line">sp_vec.contains(sp3);<span class="comment">//如果有，返回true，无返回false；  </span></div><div class="line"><span class="comment">// 如果已知容器中有sp3这个精灵，想获得它在容器中的位置：  </span></div><div class="line"><span class="keyword">int</span> pos_int = sp_vec.find(sp3);  </div><div class="line"><span class="comment">// 上面的方法可以获得sp3的位置，但返回的其实是迭代器的地址，你得到的结果可能是45214等等，如果想获得正常需要的位置，可以这样：  </span></div><div class="line"><span class="keyword">int</span> pos_int = sp_vec.find(sp3) - sp_vec.begin();</div></pre></td></tr></table></figure>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a><strong>Map</strong></h2><p><code>Map</code>是用来替代<code>CCDictionary</code>的。内存管理我们无须担心，不过如果使用了<code>new</code>来分配内存，我们还是得使用<code>delete</code>释放内存。一般情况下，不要使用<code>new</code>。同样，<code>Map</code>也不能使用引用计数的方法管理内存。</p>
<p><strong>注意，<code>Map</code>没有重载[]，不能使用下标来获取对象</strong>。</p>
<h3 id="创建-4"><a href="#创建-4" class="headerlink" title="创建"></a><strong>创建</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">auto</span> sp1 = Sprite::create(<span class="string">"CloseNormal.png"</span>);  </div><div class="line">sp1-&gt;setPosition(Point(<span class="number">100</span>,<span class="number">100</span>));  </div><div class="line"><span class="keyword">this</span>-&gt;addChild(sp1,<span class="number">1</span>);  </div><div class="line">  </div><div class="line"><span class="keyword">auto</span> sp2 = Sprite::create(<span class="string">"CloseSelected.png"</span>);  </div><div class="line">sp2-&gt;setPosition(Point(<span class="number">100</span>,<span class="number">200</span>));  </div><div class="line"><span class="keyword">this</span>-&gt;addChild(sp2,<span class="number">1</span>);</div><div class="line"></div><div class="line"><span class="comment">//建立一个关联容器map,第一个参数是string型的key，第二个参数是Sprite类的key值  </span></div><div class="line">Map&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, Sprite *&gt;sp_map;</div></pre></td></tr></table></figure>
<h3 id="将对象加入容器"><a href="#将对象加入容器" class="headerlink" title="将对象加入容器"></a><strong>将对象加入容器</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 将精灵放入容器中，第一个参数是key</span></div><div class="line">sp_map.insert(<span class="string">"sp1"</span>,sp1); </div><div class="line">sp_map.insert(<span class="string">"sp2"</span>,sp2);</div></pre></td></tr></table></figure>
<h3 id="取出容器中的元素"><a href="#取出容器中的元素" class="headerlink" title="取出容器中的元素"></a><strong>取出容器中的元素</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">auto</span> sp = sp_vec.at(<span class="string">"sp1"</span>);  <span class="comment">// 通过键值获得sp1</span></div></pre></td></tr></table></figure>
<h3 id="其他功能"><a href="#其他功能" class="headerlink" title="其他功能"></a><strong>其他功能</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">auto</span> sp5 = sp_map.at(<span class="string">"sp1"</span>);          <span class="comment">// 通过key取出sp1  </span></div><div class="line">sp_map.insert(<span class="string">"10"</span>, sp5);             <span class="comment">// 再将sp1 以三个key值的方式存入map  </span></div><div class="line">sp_map.insert(<span class="string">"20"</span>, sp5);  </div><div class="line">sp_map.insert(<span class="string">"30"</span>, sp5);  </div><div class="line">  </div><div class="line"><span class="keyword">auto</span> <span class="number">_</span>key = sp_map.keys(sp1);         <span class="comment">// 获得sp1对应的key值  </span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <span class="number">_</span>key)  </div><div class="line">&#123;  </div><div class="line">    CCLOG(<span class="string">"_key is %s"</span>, e.c_str());   <span class="comment">// 输出sp1 对应的key值（有四个，分别是：sp1，10，20，30）  </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Map</code>对象的元素是键-值对，也就是每个元素包含两个部分：键以及由键关联的值。这种键和键值组成一个<code>pair</code>类型，它的<code>first</code>元素指向键，<code>second</code>元素则为元素。如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">auto</span> find_sp = sp_map.find(<span class="string">"10"</span>);                    <span class="comment">// 通过find()查找key为“10”的pair类型。  </span></div><div class="line"><span class="keyword">auto</span> sp6 = find_sp-&gt;second;                          <span class="comment">// 键对应的对象  </span></div><div class="line"><span class="built_in">std</span>::<span class="built_in">string</span> find_str = find_sp-&gt;first;</div><div class="line">CCLOG(<span class="string">"sp6 key value is %s"</span>, find_str.c_str());      <span class="comment">// 打印出键  </span></div><div class="line">sp6-&gt;runAction(MoveBy::create(<span class="number">0.3f</span>, Point(<span class="number">200</span>,<span class="number">0</span>)));  <span class="comment">// 让sp6做运动</span></div></pre></td></tr></table></figure>
<h2 id="Value"><a href="#Value" class="headerlink" title="Value"></a><strong>Value</strong></h2><p><code>Value</code>可以保存任意基本类型，而Cocos中的<code>std::vector<value></value></code>、<code>std::unordered_map<std::string, value=""></std::string,>、<code>std::unordered_map<int, value=""></int,>等等也可以存放到<code>Value</code>中。之前的<code>CCBool</code>、<code>CCInt</code>等将被废除，改为统一的变量。</code></code></p>
<h3 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a><strong>内存管理</strong></h3><p><code>Value</code>由它的析构函数释放内存，<code>Value</code>包含以下成员：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">union</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> byteVal;</div><div class="line">    <span class="keyword">int</span> intVal;</div><div class="line">    <span class="keyword">float</span> floatVal;</div><div class="line">    <span class="keyword">double</span> doubleVal;</div><div class="line">    <span class="keyword">bool</span> boolVal;</div><div class="line">&#125;<span class="number">_b</span>aseData;</div><div class="line"></div><div class="line"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="number">_</span>strData;</div><div class="line">ValueVector* <span class="number">_</span>vectorData;</div><div class="line">ValueMap* <span class="number">_</span>mapData;</div><div class="line">ValueMapIntKey* <span class="number">_</span>intKeyMapData;</div><div class="line"></div><div class="line">Type <span class="number">_</span>type;</div></pre></td></tr></table></figure>
<p><code>_baseData</code>、<code>_strData</code>和<code>_type</code>是由编译器和它们的析构函数负责释放内存的，而<code>Value</code>的析构函数释放<code>_vectorData</code>、<code>_mapData</code>和<code>intKeyMapData</code>。<code>Value</code>同样不能用引用计数管理内存。</p>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a><strong>基本用法</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 实例化Value</span></div><div class="line">Value val;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (val.isNull()) &#123;</div><div class="line">    <span class="built_in">log</span>(<span class="string">"val is null"</span>);</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> str = val.getDescription();</div><div class="line">    <span class="built_in">log</span>(<span class="string">"The description of val0:%s"</span>, str.c_str());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 初始化Value</span></div><div class="line"><span class="function">Value <span class="title">val1</span><span class="params">(<span class="number">65</span>)</span></span>;      <span class="comment">// 整型初始化</span></div><div class="line"><span class="comment">//Value val1(3.4f);  // float变量初始化</span></div><div class="line"><span class="comment">//Value val1(3.5);   // double变量初始化</span></div><div class="line"><span class="built_in">log</span>(<span class="string">"The description of the integer value:%s"</span>, val1.getDescription().c_str());</div><div class="line"><span class="built_in">log</span>(<span class="string">"val1.asByte() = %c"</span>, val1.asByte());</div><div class="line"></div><div class="line"><span class="comment">// 使用string初始化</span></div><div class="line"><span class="built_in">std</span>::<span class="built_in">string</span> strV = <span class="string">"string"</span>;</div><div class="line"><span class="function">Value <span class="title">val2</span><span class="params">(strV)</span></span>;</div><div class="line"><span class="built_in">log</span>(<span class="string">"The description of the string value:%s"</span>, val2.getDescription().c_str());</div><div class="line"></div><div class="line"><span class="comment">// 使用Vector初始化</span></div><div class="line"><span class="keyword">auto</span> sp0 = Sprite::create();</div><div class="line">Vector&lt;Object *&gt; *vecV = <span class="keyword">new</span> Vector&lt;Object *&gt;();</div><div class="line">vecV-&gt;pushBack(sp0);</div><div class="line"><span class="function">Value <span class="title">val3</span><span class="params">(vecV)</span></span>;</div><div class="line"><span class="built_in">log</span>(<span class="string">"The description of the Vector value:%s"</span>, val3.getDescription().c_str());</div><div class="line"><span class="keyword">delete</span> vecV;</div><div class="line"></div><div class="line"><span class="comment">// 使用Map初始化</span></div><div class="line">Map&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, Object *&gt; *mapV = <span class="keyword">new</span> Map&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, Object *&gt;();</div><div class="line">mapV-&gt;insert(strV,sp0);</div><div class="line"><span class="function">Value <span class="title">val4</span><span class="params">(mapV)</span></span>;</div><div class="line"><span class="built_in">log</span>(<span class="string">"The description of the Map value:%s"</span>, val4.getDescription().c_str());</div><div class="line"><span class="keyword">delete</span> mapV;</div><div class="line"></div><div class="line"><span class="comment">// 使用另一个Value初始化</span></div><div class="line"><span class="function">Value <span class="title">val6</span><span class="params">(&amp;val4)</span></span>;</div><div class="line"><span class="built_in">log</span>(<span class="string">"The description of the Value-type value:%s"</span>, val6.getDescription().c_str());</div><div class="line"></div><div class="line"><span class="comment">// 使用=运算符赋值</span></div><div class="line">val2 = val1;</div><div class="line"><span class="built_in">log</span>(<span class="string">"operator-&gt; The description of val2:%s"</span>, val2.getDescription().c_str());</div><div class="line">val2 = <span class="number">4</span>;</div><div class="line"><span class="built_in">log</span>(<span class="string">"operator-&gt; The description of val4:%s"</span>,val2.getDescription().c_str());</div></pre></td></tr></table></figure>
<p>输出如下：</p>
<pre><code>cocos2d: val is null
cocos2d: The description of the integer value:
65

cocos2d: val1.asByte() = A
cocos2d: The description of the string value:
string

cocos2d: The description of the Vector value:
true

cocos2d: The description of the Map value:
true

cocos2d: The description of the Value-type value:
true

cocos2d: operator-&gt; The description of val2:
65

cocos2d: operator-&gt; The description of val4:
4
</code></pre><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><p>优先使用新的数据结构，当要使用基本类型的聚合时，将基本类型包装成<code>cocos2d::Value</code>，然后将它们和模版容器<code>cocos2d::Vector</code>和<code>cocos2d::Map</code>联合使用。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Cocos2dx/" rel="tag">#Cocos2dx</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/09/Algorithm-note-05/" rel="next" title="数据结构与算法学习笔记（5）——最短寻路">
                <i class="fa fa-chevron-left"></i> 数据结构与算法学习笔记（5）——最短寻路
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/09/18/C&C++-note-03/" rel="prev" title="C&C++学习笔记（3）——operator">
                C&C++学习笔记（3）——operator <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/09/13/Cocos2dx-note-18/"
           data-title="Cocos2dx学习笔记（18）——Cocos数据结构" data-url="http://yoursite.com/2016/09/13/Cocos2dx-note-18/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://obkyr9y96.bkt.clouddn.com/560f8f43fbf2b2114886d1e3cd8065380dd78eaf.jpg"
               alt="普罗旺斯的猫" />
          <p class="site-author-name" itemprop="name">普罗旺斯的猫</p>
          <p class="site-description motion-element" itemprop="description">保持微笑:)，一切都会好起来的~</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">71</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/huyinxian" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/5817221614" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/hu-yin-xian" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/Cappuccino_Java" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-x与3-x"><span class="nav-number">1.</span> <span class="nav-text">2.x与3.x</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CCArray"><span class="nav-number">2.</span> <span class="nav-text">CCArray</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建"><span class="nav-number">2.1.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插入"><span class="nav-number">2.2.</span> <span class="nav-text">插入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除"><span class="nav-number">2.3.</span> <span class="nav-text">删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#遍历"><span class="nav-number">2.4.</span> <span class="nav-text">遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#操作元素"><span class="nav-number">2.5.</span> <span class="nav-text">操作元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#操作CCArray内容"><span class="nav-number">2.6.</span> <span class="nav-text">操作CCArray内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判等"><span class="nav-number">2.7.</span> <span class="nav-text">判等</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码实现"><span class="nav-number">2.8.</span> <span class="nav-text">代码实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注意事项"><span class="nav-number">2.9.</span> <span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CCDictionary"><span class="nav-number">3.</span> <span class="nav-text">CCDictionary</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#key"><span class="nav-number">3.1.</span> <span class="nav-text">key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CCDictElement"><span class="nav-number">3.2.</span> <span class="nav-text">CCDictElement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建-1"><span class="nav-number">3.3.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查找"><span class="nav-number">3.4.</span> <span class="nav-text">查找</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增加"><span class="nav-number">3.5.</span> <span class="nav-text">增加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移除"><span class="nav-number">3.6.</span> <span class="nav-text">移除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他操作"><span class="nav-number">3.7.</span> <span class="nav-text">其他操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#遍历-1"><span class="nav-number">3.8.</span> <span class="nav-text">遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码示例"><span class="nav-number">3.9.</span> <span class="nav-text">代码示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CCString"><span class="nav-number">4.</span> <span class="nav-text">CCString</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建-2"><span class="nav-number">4.1.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#转换"><span class="nav-number">4.2.</span> <span class="nav-text">转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用宏定义"><span class="nav-number">4.3.</span> <span class="nav-text">常用宏定义</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vector"><span class="nav-number">5.</span> <span class="nav-text">Vector</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建-3"><span class="nav-number">5.1.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取容器大小"><span class="nav-number">5.2.</span> <span class="nav-text">获取容器大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#遍历-2"><span class="nav-number">5.3.</span> <span class="nav-text">遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除容器中的精灵"><span class="nav-number">5.4.</span> <span class="nav-text">删除容器中的精灵</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他用法"><span class="nav-number">5.5.</span> <span class="nav-text">其他用法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Map"><span class="nav-number">6.</span> <span class="nav-text">Map</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建-4"><span class="nav-number">6.1.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将对象加入容器"><span class="nav-number">6.2.</span> <span class="nav-text">将对象加入容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#取出容器中的元素"><span class="nav-number">6.3.</span> <span class="nav-text">取出容器中的元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他功能"><span class="nav-number">6.4.</span> <span class="nav-text">其他功能</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Value"><span class="nav-number">7.</span> <span class="nav-text">Value</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#内存管理"><span class="nav-number">7.1.</span> <span class="nav-text">内存管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本用法"><span class="nav-number">7.2.</span> <span class="nav-text">基本用法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">8.</span> <span class="nav-text">总结</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">普罗旺斯的猫</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"fantasticmiao"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>

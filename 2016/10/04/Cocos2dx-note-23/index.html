<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Cocos2dx," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Node类是Cocos中极为重要的类，Scene、Layer、Sprite等等都派生自Node类。">
<meta property="og:type" content="article">
<meta property="og:title" content="Cocos2dx学习笔记（23）——节点类Node">
<meta property="og:url" content="http://yoursite.com/2016/10/04/Cocos2dx-note-23/index.html">
<meta property="og:site_name" content="先哥哥<(^ - ^)/">
<meta property="og:description" content="Node类是Cocos中极为重要的类，Scene、Layer、Sprite等等都派生自Node类。">
<meta property="og:updated_time" content="2016-12-06T03:11:48.706Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cocos2dx学习笔记（23）——节点类Node">
<meta name="twitter:description" content="Node类是Cocos中极为重要的类，Scene、Layer、Sprite等等都派生自Node类。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6316601514345367000,
      author: '先哥哥'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/10/04/Cocos2dx-note-23/"/>

  <title> Cocos2dx学习笔记（23）——节点类Node | 先哥哥<(^ - ^)/ </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<!-- hexo-inject:begin --><!-- hexo-inject:end --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-82195042-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">先哥哥<(^ - ^)/</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">三年级生~</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', '6g6uJxAMRsEqayhdJAk5','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Cocos2dx学习笔记（23）——节点类Node
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-04T10:39:38+08:00" content="2016-10-04">
              2016-10-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Cocos2dx/" itemprop="url" rel="index">
                    <span itemprop="name">Cocos2dx</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/04/Cocos2dx-note-23/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/04/Cocos2dx-note-23/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Node类是Cocos中极为重要的类，Scene、Layer、Sprite等等都派生自Node类。<br><a id="more"></a></p>
<blockquote>
<p><strong>本文仅供个人记录和复习，不用于其他用途</strong></p>
</blockquote>
<h2 id="版本变化"><a href="#版本变化" class="headerlink" title="版本变化"></a><strong>版本变化</strong></h2><p>由于前后版本差距较大，所以这里只简单的讲一下2.x版本，主要还是分析3.x之后的<code>Node</code>类。</p>
<h2 id="节点类的特点"><a href="#节点类的特点" class="headerlink" title="节点类的特点"></a><strong>节点类的特点</strong></h2><p>游戏里的对象都是一个节点，拥有以下特点：</p>
<ul>
<li>是一个容器，可以包含任意多个节点</li>
<li>可以执行一个行为<code>Action</code></li>
<li>可以执行一个定时的任务回调<code>schedule</code></li>
<li>拥有坐标变换信息<code>transform</code>，例如<code>position</code>、<code>scale</code>、<code>rotate</code>等</li>
</ul>
<h2 id="2-x版本"><a href="#2-x版本" class="headerlink" title="2.x版本"></a><strong>2.x版本</strong></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 设置节点是否可见.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setVisible</span><span class="params">(<span class="keyword">bool</span> visible)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">isVisible</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 设置节点的尺寸大小.即节点的容器大小.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setContentSize</span><span class="params">(<span class="keyword">const</span> CCSize&amp; contentSize)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> CCSize&amp; <span class="title">getContentSize</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 设置节点的坐标(x,y).在OpenGL中的坐标</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPosition</span><span class="params">(<span class="keyword">const</span> CCPoint &amp;position)</span></span>; <span class="comment">// 传参为坐标类CCPoint</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> CCPoint&amp; <span class="title">getPosition</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPosition</span><span class="params">(<span class="keyword">float</span> x, <span class="keyword">float</span> y)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">getPosition</span><span class="params">(<span class="keyword">float</span>* x, <span class="keyword">float</span>* y)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span>  <span class="title">setPositionX</span><span class="params">(<span class="keyword">float</span> x)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getPositionX</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span>  <span class="title">setPositionY</span><span class="params">(<span class="keyword">float</span> y)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getPositionY</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 设置节点的锚点.</span></div><div class="line"><span class="comment">// 锚点就像一枚图钉,将图片钉在屏幕上.而锚点就是图片的坐标.</span></div><div class="line"><span class="comment">// 当然图钉可以钉在图片的左下角,右上角,或者中心都可以.</span></div><div class="line"><span class="comment">// 一般由CCNode继承的子类大多锚点都在中心,也有些是在左下角.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setAnchorPoint</span><span class="params">(<span class="keyword">const</span> CCPoint&amp; anchorPoint)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> CCPoint&amp; <span class="title">getAnchorPoint</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> CCPoint&amp; <span class="title">getAnchorPointInPoints</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 设置节点的Z轴.</span></div><div class="line"><span class="comment">// 当有多个节点在Z轴显示时,引擎会根据它们Z轴的大小决定绘制顺序,Z轴大的会遮盖Z轴小的</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setZOrder</span><span class="params">(<span class="keyword">int</span> zOrder)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getZOrder</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 设置节点的放缩比例.对X轴或Y轴进行放缩</span></div><div class="line"><span class="comment">// 例如一张图片. 放缩它的宽X,和高Y</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScaleX</span><span class="params">(<span class="keyword">float</span> fScaleX)</span></span>;              <span class="comment">// 放缩宽X</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getScaleX</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScaleY</span><span class="params">(<span class="keyword">float</span> fScaleY)</span></span>;              <span class="comment">// 放缩高Y</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getScaleY</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScale</span><span class="params">(<span class="keyword">float</span> scale)</span></span>;                 <span class="comment">// 同时放缩X与Y</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getScale</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScale</span><span class="params">(<span class="keyword">float</span> fScaleX,<span class="keyword">float</span> fScaleY)</span></span>; <span class="comment">// X放缩fScaleX倍,Y放缩fScaleY倍</span></div><div class="line"> </div><div class="line"><span class="comment">// 设置节点的倾斜角度.与平面的倾斜角度</span></div><div class="line"><span class="comment">// 如一张图片. X轴倾斜fSkewX角度,Y轴倾斜fSkewY角度</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setSkewX</span><span class="params">(<span class="keyword">float</span> fSkewX)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getSkewX</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setSkewY</span><span class="params">(<span class="keyword">float</span> fSkewY)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getSkewY</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 设置节点旋转角度.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setRotation</span><span class="params">(<span class="keyword">float</span> fRotation)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getRotation</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setRotationX</span><span class="params">(<span class="keyword">float</span> fRotaionX)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getRotationX</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setRotationY</span><span class="params">(<span class="keyword">float</span> fRotationY)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getRotationY</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">// 节点相关函数</span></div><div class="line"><span class="comment">// addChild , removeChild , setParent , removeFromParent ,</span></div><div class="line"><span class="comment">// reorderChild , sortAllChildren , setTag , </span></div><div class="line"><span class="comment">// getCamera , isRunning , cleanup , </span></div><div class="line"><span class="comment">// draw , visit , boundingBox ,</span></div><div class="line"><span class="comment">// onEnter , onEnterTransitionDidFinish , onExit</span></div><div class="line"></div><div class="line"> </div><div class="line"><span class="comment">// 添加子节点.zOrder默认为0.</span></div><div class="line"><span class="comment">// tag为节点编号,可以通过tag获取子节点.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">addChild</span><span class="params">(CCNode * child)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">addChild</span><span class="params">(CCNode * child, <span class="keyword">int</span> zOrder)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">addChild</span><span class="params">(CCNode* child, <span class="keyword">int</span> zOrder, <span class="keyword">int</span> tag)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> CCNode * <span class="title">getChildByTag</span><span class="params">(<span class="keyword">int</span> tag)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> CCArray* <span class="title">getChildren</span><span class="params">()</span></span>;                    <span class="comment">// 获得所有子节点,并以CCArray数组返回</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">getChildrenCount</span><span class="params">(<span class="keyword">void</span>)</span> <span class="keyword">const</span></span>; <span class="comment">// 子节点个数</span></div><div class="line"> </div><div class="line"><span class="comment">// 删除子节点.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeChild</span><span class="params">(CCNode* child)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeChild</span><span class="params">(CCNode* child, <span class="keyword">bool</span> cleanup)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeChildByTag</span><span class="params">(<span class="keyword">int</span> tag)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeChildByTag</span><span class="params">(<span class="keyword">int</span> tag, <span class="keyword">bool</span> cleanup)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeAllChildren</span><span class="params">()</span></span>;                        <span class="comment">// 删除所有节点</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeAllChildrenWithCleanup</span><span class="params">(<span class="keyword">bool</span> cleanup)</span></span>; <span class="comment">// cleanup为true则删除子节点的所有动作</span></div><div class="line"> </div><div class="line"><span class="comment">// 设置父节点.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setParent</span><span class="params">(CCNode* parent)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> CCNode* <span class="title">getParent</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 从父节点中移除该节点.</span></div><div class="line"><span class="comment">// Cleanup为true则删除当前节点的所有动作及回调函数.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeFromParent</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeFromParentAndCleanup</span><span class="params">(<span class="keyword">bool</span> cleanup)</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 重新设定节点的zOrder</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">reorderChild</span><span class="params">(CCNode * child, <span class="keyword">int</span> zOrder)</span></span>;</div><div class="line"><span class="comment">// 重新排序所有子节点</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">sortAllChildren</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 设置节点的tag编号</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setTag</span><span class="params">(<span class="keyword">int</span> nTag)</span></span>;</div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getTag</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 获取节点的CCCamera摄像机</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> CCCamera* <span class="title">getCamera</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// 判断节点是否在运行</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">isRunning</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// 停止所有运行的动作和回调函数</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">cleanup</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 绘制节点.</span></div><div class="line"><span class="comment">// draw里有好多绘制方法.如直线,曲线,矩形,圆等</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="comment">// 递归访问所有子节点,并重新绘制</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 返回节点的矩形边界框</span></div><div class="line"><span class="function">CCRect <span class="title">boundingBox</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 节点开始进入舞台时调用.即创建时调用.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">onEnter</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// 节点进入舞台后调用.即创建完后调用.</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">onEnterTransitionDidFinish</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// 节点离开舞台时调用.即移除时调用</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">onExit</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment">// Action动作相关</span></div><div class="line"><span class="comment">// runAction , stopAction , getActionByTag , numberOfRunningActions</span></div><div class="line"></div><div class="line"> </div><div class="line"><span class="comment">// 执行动作</span></div><div class="line"><span class="function">CCAction* <span class="title">runAction</span><span class="params">(CCAction* action)</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">// 暂停动作</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">stopAllActions</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">stopAction</span><span class="params">(CCAction* action)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">stopActionByTag</span><span class="params">(<span class="keyword">int</span> tag)</span></span>;</div><div class="line"> </div><div class="line"><span class="function">CCAction* <span class="title">getActionByTag</span><span class="params">(<span class="keyword">int</span> tag)</span></span>;         <span class="comment">// 根据tag标记获取动作</span></div><div class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">numberOfRunningActions</span><span class="params">(<span class="keyword">void</span>)</span></span>; <span class="comment">// 获取正在运行的动作数量</span></div><div class="line"> </div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment">// 定时器相关函数</span></div><div class="line"><span class="comment">// scheduleUpdate , schedule , update</span></div><div class="line"></div><div class="line"> </div><div class="line"><span class="comment">// 开启默认定时器.刷新次数为60次/秒.即每秒60帧.</span></div><div class="line"><span class="comment">// 与update(float delta)回调函数相对应.</span></div><div class="line"><span class="comment">// 给予定时器优先级priority.其中priority越小,优先级越高</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">scheduleUpdate</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">scheduleUpdateWithPriority</span><span class="params">(<span class="keyword">int</span> priority)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">unscheduleUpdate</span><span class="params">(<span class="keyword">void</span>)</span></span>;      <span class="comment">// 取消默认定时器</span></div><div class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> delta)</span></span>; <span class="comment">// update为scheduleUpdate定时器的回调函数.</span></div><div class="line"> </div><div class="line"><span class="comment">// 设置自定义定时器.默认为每秒60帧.</span></div><div class="line"><span class="comment">// interval  :   每隔interval秒,执行一次.</span></div><div class="line"><span class="comment">// repeat    :   重复次数.</span></div><div class="line"><span class="comment">// delay     :   延迟时间,即创建定时器delay后开始执行.</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">schedule</span><span class="params">(SEL_SCHEDULE selector, <span class="keyword">float</span> interval, <span class="keyword">unsigned</span> <span class="keyword">int</span> repeat, <span class="keyword">float</span> delay)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">schedule</span><span class="params">(SEL_SCHEDULE selector, <span class="keyword">float</span> interval)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">scheduleOnce</span><span class="params">(SEL_SCHEDULE selector, <span class="keyword">float</span> delay)</span></span>; <span class="comment">// 只执行一次,delay秒后执行</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">schedule</span><span class="params">(SEL_SCHEDULE selector)</span></span>;                  <span class="comment">// 默认为每秒60帧</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">unschedule</span><span class="params">(SEL_SCHEDULE selector)</span></span>;                <span class="comment">// 取消定时器</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">unscheduleAllSelectors</span><span class="params">(<span class="keyword">void</span>)</span></span>;                     <span class="comment">// 取消所有定时器</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pauseSchedulerAndActions</span><span class="params">(<span class="keyword">void</span>)</span></span>;                   <span class="comment">// 暂停所有定时器和动作</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">resumeSchedulerAndActions</span><span class="params">(<span class="keyword">void</span>)</span></span>;                  <span class="comment">// 恢复所有定时器和动作</span></div></pre></td></tr></table></figure>
<h2 id="3-x版本"><a href="#3-x版本" class="headerlink" title="3.x版本"></a><strong>3.x版本</strong></h2><p><code>Node</code>类是绝大部分类的父类，例如<code>Scene</code>、<code>Laye</code>、<code>Sprite</code>等都是继承了<code>Node</code>类。<code>Node</code>类的基本特点上面已经讲过了。</p>
<h3 id="节点属性"><a href="#节点属性" class="headerlink" title="节点属性"></a><strong>节点属性</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 位置Position</div><div class="line"> *     设置节点的坐标(x,y).在OpenGL中的坐标</div><div class="line"> *     增加3D坐标</div><div class="line"> *     增加标准化坐标设置</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPosition</span><span class="params">(<span class="keyword">const</span> Vec2 &amp;position)</span></span>; <span class="comment">//Vec2坐标</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPosition</span><span class="params">(<span class="keyword">float</span> x, <span class="keyword">float</span> y)</span></span>;     <span class="comment">//(x,y),比Vec2更有效率</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPositionX</span><span class="params">(<span class="keyword">float</span> x)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPositionY</span><span class="params">(<span class="keyword">float</span> y)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> Vec2&amp; <span class="title">getPosition</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span>  <span class="title">getPosition</span><span class="params">(<span class="keyword">float</span>* x, <span class="keyword">float</span>* y)</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getPositionX</span><span class="params">(<span class="keyword">void</span>)</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getPositionY</span><span class="params">(<span class="keyword">void</span>)</span> <span class="keyword">const</span></span>;</div><div class="line">     </div><div class="line"><span class="comment">//增加3D坐标</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPosition3D</span><span class="params">(<span class="keyword">const</span> Vec3&amp; position)</span></span>; <span class="comment">//Vec3坐标</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> Vec3 <span class="title">getPosition3D</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPositionZ</span><span class="params">(<span class="keyword">float</span> positionZ)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getPositionZ</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">     </div><div class="line"><span class="comment">//增加标准化坐标设置</span></div><div class="line">    <span class="comment">//Node的位置像素会根据它的父节点的尺寸大小计算</span></div><div class="line">    <span class="comment">//Size s = getParent()-&gt;getContentSize();</span></div><div class="line">    <span class="comment">//_position = pos * s;</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setNormalizedPosition</span><span class="params">(<span class="keyword">const</span> Vec2 &amp;position)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> Vec2&amp; <span class="title">getNormalizedPosition</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 放缩Scale</div><div class="line"> *     设置节点的放缩比例. 对XYZ轴进行放缩</div><div class="line"> *     例如一张图片. 放缩它的宽X,高Y,深Z</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScaleX</span><span class="params">(<span class="keyword">float</span> scaleX)</span></span>;              <span class="comment">//放缩宽X</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScaleY</span><span class="params">(<span class="keyword">float</span> scaleY)</span></span>;              <span class="comment">//放缩高Y</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScaleZ</span><span class="params">(<span class="keyword">float</span> scaleZ)</span></span>;              <span class="comment">//放缩深Z</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScale</span><span class="params">(<span class="keyword">float</span> scaleX, <span class="keyword">float</span> scaleY)</span></span>; <span class="comment">//X放缩fScaleX倍,Y放缩fScaleY倍</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScale</span><span class="params">(<span class="keyword">float</span> scale)</span></span>;                <span class="comment">//XYZ同时放缩scale倍</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getScaleX</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getScaleY</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getScaleZ</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getScale</span><span class="params">()</span>  <span class="keyword">const</span></span>;                   <span class="comment">//当x,y放缩因子相同时，得到该节点的缩放因子</span></div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 旋转Rotation</div><div class="line"> *     设置节点的旋转角度. 负顺,正逆时针旋转</div><div class="line"> *     增加3D旋转</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setRotation</span><span class="params">(<span class="keyword">float</span> rotation)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getRotation</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">//增加3D旋转</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setRotation3D</span><span class="params">(<span class="keyword">const</span> Vec3&amp; rotation)</span></span>; </div><div class="line">    <span class="function"><span class="keyword">virtual</span> Vec3 <span class="title">getRotation3D</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 倾斜Skew</div><div class="line"> *     设置XY轴的倾斜角度</div><div class="line"> *     setRotationalSkew()  模拟Flash的倾斜功能</div><div class="line"> *     setSkew()            使用真正的倾斜功能</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setSkewX</span><span class="params">(<span class="keyword">float</span> skewX)</span></span>; <span class="comment">//水平旋转倾斜.负顺时针变形</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setSkewY</span><span class="params">(<span class="keyword">float</span> skewY)</span></span>; <span class="comment">//垂直旋转倾斜</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setRotationSkewX</span><span class="params">(<span class="keyword">float</span> rotationX)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setRotationSkewY</span><span class="params">(<span class="keyword">float</span> rotationY)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getSkewX</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getSkewY</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getRotationSkewX</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">float</span> <span class="title">getRotationSkewY</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 锚点AnchorPoint</div><div class="line"> *     锚点就像一枚图钉,将图片钉在屏幕上.而锚点就是图片的坐标.</div><div class="line"> *     当然图钉可以钉在图片的左下角,右上角,或者中心都可以.</div><div class="line"> *     (0,0)表示左下角，(1,1)表示右上角</div><div class="line"> *     默认的锚点是(0.5,0.5)，即节点的正中心</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setAnchorPoint</span><span class="params">(<span class="keyword">const</span> Vec2&amp; anchorPoint)</span></span>; <span class="comment">//标准化的锚点</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> Vec2&amp; <span class="title">getAnchorPoint</span><span class="params">()</span> <span class="keyword">const</span></span>;           <span class="comment">//标准化的锚点</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> Vec2&amp; <span class="title">getAnchorPointInPoints</span><span class="params">()</span> <span class="keyword">const</span></span>;   <span class="comment">//返回绝对像素的锚点,即屏幕坐标</span></div><div class="line"> </div><div class="line"><span class="comment">//是否忽略锚点的设置</span></div><div class="line">    <span class="comment">//若忽略锚点设置,锚点永远为(0,0)</span></div><div class="line">    <span class="comment">//默认值是false, 但是在Layer和Scene中是true</span></div><div class="line">    <span class="comment">//这是一个内部方法，仅仅被Layer和Scene使用，不要自行调用！</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">ignoreAnchorPointForPosition</span><span class="params">(<span class="keyword">bool</span> ignore)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">isIgnoreAnchorPointForPosition</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 内容大小ContentSize</div><div class="line"> *     contentSize依然是相同的，无论节点是缩放或者旋转 </div><div class="line"> *     所有的节点都有大小，图层和场景有相同的屏幕大小</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setContentSize</span><span class="params">(<span class="keyword">const</span> Size&amp; contentSize)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> Size&amp; <span class="title">getContentSize</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 可见性Visible</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setVisible</span><span class="params">(<span class="keyword">bool</span> visible)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">isVisible</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="comment">//</span></div></pre></td></tr></table></figure>
<h3 id="节点操作"><a href="#节点操作" class="headerlink" title="节点操作"></a><strong>节点操作</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 标记与名字 Tag and Name</div><div class="line"> *     setTag  : 给节点设置一个编号</div><div class="line"> *     setName : 给节点设置一个名字</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setTag</span><span class="params">(<span class="keyword">int</span> tag)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; name)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getTag</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="keyword">virtual</span> <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 自定义数据UserData/Object</div><div class="line"> *     setUserData   : 设置一个用户自定义的数据. 可以为一个数据块, 结构体或者一个对象.</div><div class="line"> *     setUserObject : 设置一个用户自定义的对象. 和userData类似, 但它是一个对象而不是void*</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setUserData</span><span class="params">(<span class="keyword">void</span> *userData)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setUserObject</span><span class="params">(Ref *userObject)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span>* <span class="title">getUserData</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> Ref* <span class="title">getUserObject</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 设置父节点Parent</div><div class="line"> *     setParent , removeFromParent</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setParent</span><span class="params">(Node* parent)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> Node* <span class="title">getParent</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeFromParent</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeFromParentAndCleanup</span><span class="params">(<span class="keyword">bool</span> cleanup)</span></span>; <span class="comment">//true则删除该节点的所有动作及回调函数.</span></div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 管理子节点Child</div><div class="line"> *     addChild , </div><div class="line"> *     getChildBy** , getChildren       , getChildrenCount</div><div class="line"> *     removeChild  , removeAllChildren</div><div class="line"> *     reorderChild , sortAllChildren</div><div class="line"> */</div><div class="line">    <span class="comment">//添加子节点</span></div><div class="line">    <span class="comment">//localZOrder   Z轴顺序为了绘画的优先权</span></div><div class="line">    <span class="comment">//tag           节点编号,可通过tag获取子节点</span></div><div class="line">    <span class="comment">//name        节点名字,可通过name获取子节点</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">addChild</span><span class="params">(Node * child)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">addChild</span><span class="params">(Node * child, <span class="keyword">int</span> localZOrder)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">addChild</span><span class="params">(Node* child, <span class="keyword">int</span> localZOrder, <span class="keyword">int</span> tag)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">addChild</span><span class="params">(Node* child, <span class="keyword">int</span> localZOrder, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name)</span></span>;</div><div class="line"> </div><div class="line">    <span class="comment">//获取子节点</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> Node* <span class="title">getChildByTag</span><span class="params">(<span class="keyword">int</span> tag)</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> Node* <span class="title">getChildByName</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; name)</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="keyword">virtual</span> Vector&lt;Node*&gt;&amp; getChildren();     <span class="comment">//获得所有子节点,并以Vector数组返回</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> ssize_t <span class="title">getChildrenCount</span><span class="params">()</span> <span class="keyword">const</span></span>; <span class="comment">//子节点总数</span></div><div class="line"> </div><div class="line">    <span class="comment">//删除子节点</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeChild</span><span class="params">(Node* child, <span class="keyword">bool</span> cleanup = <span class="literal">true</span>)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeChildByTag</span><span class="params">(<span class="keyword">int</span> tag, <span class="keyword">bool</span> cleanup = <span class="literal">true</span>)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeChildByName</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">bool</span> cleanup = <span class="literal">true</span>)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeAllChildren</span><span class="params">()</span></span>;                        <span class="comment">//删除所有节点</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">removeAllChildrenWithCleanup</span><span class="params">(<span class="keyword">bool</span> cleanup)</span></span>; <span class="comment">//cleanup为true则删除子节点的所有动作</span></div><div class="line"> </div><div class="line">    <span class="comment">//重排子节点</span></div><div class="line">    <span class="comment">//重新排序一个子节点，设定一个新的z轴的值</span></div><div class="line">    <span class="comment">//child         它必须是已经添加的</span></div><div class="line">    <span class="comment">//localZOrder   Z轴顺序为了绘画优先级</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">reorderChild</span><span class="params">(Node * child, <span class="keyword">int</span> localZOrder)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">sortAllChildren</span><span class="params">()</span></span>; <span class="comment">//重新排序所有子节点</span></div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 其他操作管理</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">onEnter</span><span class="params">()</span></span>;                    <span class="comment">//节点开始进入舞台时调用.即创建时调用.</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">onEnterTransitionDidFinish</span><span class="params">()</span></span>; <span class="comment">//节点进入舞台后调用.即创建完后调用.</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">onExit</span><span class="params">()</span></span>;                     <span class="comment">//节点离开舞台时调用.即移除时调用</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">onExitTransitionDidStart</span><span class="params">()</span></span>;   <span class="comment">//节点离开舞台前调用.</span></div><div class="line"> </div><div class="line">    <span class="comment">//绘制节点</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> final</span>;</div><div class="line">    <span class="comment">//递归访问所有子节点,并重新绘制  </span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">()</span> final</span>;</div><div class="line"> </div><div class="line">    <span class="comment">//返回包含Node(节点)的Scene(场景). </span></div><div class="line">    <span class="comment">//若不属于任何的场景,它将返回nullptr</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> Scene* <span class="title">getScene</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">     </div><div class="line">    <span class="comment">//返回节点在父节点坐标中的矩形边界框</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> Rect <span class="title">getBoundingBox</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">     </div><div class="line">    <span class="comment">//暂停所有的活动着的动作和调度器</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">cleanup</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<h3 id="动作相关Action"><a href="#动作相关Action" class="headerlink" title="动作相关Action"></a><strong>动作相关Action</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 动作管理Action</div><div class="line"> *     setActionManager</div><div class="line"> *     runAction , stopAction , getActionByTag , getNumberOfRunningActions</div><div class="line"> */</div><div class="line">    <span class="comment">//设置被所有动作使用的ActionManager对象</span></div><div class="line">    <span class="comment">//如果你设置了一个新的ActionManager, 那么之前创建的动作将会被删除</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setActionManager</span><span class="params">(ActionManager* actionManager)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> ActionManager* <span class="title">getActionManager</span><span class="params">()</span></span>;</div><div class="line"> </div><div class="line">    <span class="function">Action* <span class="title">runAction</span><span class="params">(Action* action)</span></span>;          <span class="comment">//执行一个动作</span></div><div class="line">    <span class="function">Action* <span class="title">getActionByTag</span><span class="params">(<span class="keyword">int</span> tag)</span></span>;            <span class="comment">//获取动作, 根据tag标记</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">stopAllActions</span><span class="params">()</span></span>;                      <span class="comment">//暂停动作</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">stopAction</span><span class="params">(Action* action)</span></span>;            <span class="comment">//暂停动作</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">stopActionByTag</span><span class="params">(<span class="keyword">int</span> tag)</span></span>;              <span class="comment">//暂停动作</span></div><div class="line">    <span class="keyword">ssize_t</span> getNumberOfRunningActions() <span class="keyword">const</span>;  <span class="comment">//获取正在运行的动作数量</span></div></pre></td></tr></table></figure>
<h3 id="定时器相关schedule"><a href="#定时器相关schedule" class="headerlink" title="定时器相关schedule"></a><strong>定时器相关schedule</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 定时器管理schedule</div><div class="line"> *     setScheduler</div><div class="line"> *     scheduleUpdate : 默认定时器</div><div class="line"> *     schedule       : 自定义定时器</div><div class="line"> *     scheduleOnce   : 一次性定时器</div><div class="line"> */</div><div class="line">    <span class="comment">//设置一个调度器对象，来调度所有的“update”和定时器</span></div><div class="line">    <span class="comment">//如果你设置了一个新的调度器，那么之前创建的timers/update将会被删除。</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setScheduler</span><span class="params">(Scheduler* scheduler)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> Scheduler* <span class="title">getScheduler</span><span class="params">()</span></span>; <span class="comment">//得到调度器对象</span></div><div class="line"> </div><div class="line">    <span class="comment">//开启默认定时器.刷新次数为60次/秒.即每秒60帧.</span></div><div class="line">    <span class="comment">//与update(float delta)回调函数相对应.</span></div><div class="line">    <span class="comment">//给予定时器优先级priority.其中priority越小,优先级越高</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">scheduleUpdate</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">scheduleUpdateWithPriority</span><span class="params">(<span class="keyword">int</span> priority)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">unscheduleUpdate</span><span class="params">(<span class="keyword">void</span>)</span></span>;      <span class="comment">//取消默认定时器</span></div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> delta)</span></span>; <span class="comment">//update为scheduleUpdate定时器的回调函数.</span></div><div class="line"> </div><div class="line">    <span class="comment">//设置自定义定时器.默认为每秒60帧.</span></div><div class="line">    <span class="comment">//interval  :   每隔interval秒,执行一次.</span></div><div class="line">    <span class="comment">//repeat    :   重复次数.</span></div><div class="line">    <span class="comment">//delay     :   延迟时间,即创建定时器delay后开始执行.</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">schedule</span><span class="params">(SEL_SCHEDULE selector, <span class="keyword">float</span> interval, <span class="keyword">unsigned</span> <span class="keyword">int</span> repeat, <span class="keyword">float</span> delay)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">schedule</span><span class="params">(SEL_SCHEDULE selector, <span class="keyword">float</span> interval)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">schedule</span><span class="params">(SEL_SCHEDULE selector)</span></span>;                  <span class="comment">//默认为每秒60帧</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">scheduleOnce</span><span class="params">(SEL_SCHEDULE selector, <span class="keyword">float</span> delay)</span></span>; <span class="comment">//只执行一次,delay秒后执行</span></div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">unschedule</span><span class="params">(SEL_SCHEDULE selector)</span></span>;                <span class="comment">//取消一个自定义定时器</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">unscheduleAllSelectors</span><span class="params">(<span class="keyword">void</span>)</span></span>;                     <span class="comment">//取消所有定时器</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">resume</span><span class="params">(<span class="keyword">void</span>)</span></span>;                                     <span class="comment">//恢复所有定时器和动作</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pause</span><span class="params">(<span class="keyword">void</span>)</span></span>;                                      <span class="comment">//暂停所有定时器和动作</span></div></pre></td></tr></table></figure>
<h3 id="整合NodeRGBA类"><a href="#整合NodeRGBA类" class="headerlink" title="整合NodeRGBA类"></a><strong>整合NodeRGBA类</strong></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 整合NodeRGBA类</div><div class="line"> *     setOpacity : 透明度</div><div class="line"> *     setColor   : 颜色</div><div class="line"> */</div><div class="line">    <span class="function"><span class="keyword">virtual</span> GLubyte <span class="title">getOpacity</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> GLubyte <span class="title">getDisplayedOpacity</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setOpacity</span><span class="params">(GLubyte opacity)</span></span>;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> Color3B&amp; <span class="title">getColor</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> Color3B&amp; <span class="title">getDisplayedColor</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setColor</span><span class="params">(<span class="keyword">const</span> Color3B&amp; color)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="enumerateChildren"><a href="#enumerateChildren" class="headerlink" title="enumerateChildren"></a><strong>enumerateChildren</strong></h3><p>用于枚举某个<code>Node</code>节点的子节点，并让名字符合<code>name通配符</code>的子节点执行<code>callback()</code>函数。且<code>callback()</code>函数返回类型应该为一个<code>bool</code>值，并且返回为<code>true</code>时，结束查找。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">virtual void enumerateChildren(const std::string &amp;name, std::function&lt;bool(Node* node)&gt; callback) const;</div></pre></td></tr></table></figure>
<p>使用举例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//搜索语法选项</div><div class="line">'//' : 递归访问所有子节点,   只能放在搜索串的开头位置</div><div class="line">'..' : 搜索移至node的父节点, 只能放在某个字符串的结束位置</div><div class="line">'/'  : 搜索移至node的子节点, 可以放在任何位置,除了搜索串的开头位置</div><div class="line">  </div><div class="line">//代码举例</div><div class="line">enumerateChildren("//MyName", ...)     : 递归访问Node的所有子节点。查找匹配 "MyName" 的子节点</div><div class="line">enumerateChildren("[[:alnum:]]+", ...) : 在Node的儿子节点中查找。  所有项</div><div class="line">enumerateChildren("A[[:digit:]]", ...) : 在Node的儿子节点中查找。  名字为 "A0","A1",...,"A9" 的子节点</div><div class="line">enumerateChildren("Abby/Normal", ...)  : 在Node的孙子节点中查找。  其节点为"Normal"，且父节点为"Abby"</div><div class="line">enumerateChildren("//Abby/Normal", ...): 递归访问Node的所有子节点。其节点为"Normal"，且父节点为"Abby"</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Cocos2dx/" rel="tag">#Cocos2dx</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/03/C&C++-note-06/" rel="next" title="C&C++学习笔记（6）——function和bind">
                <i class="fa fa-chevron-left"></i> C&C++学习笔记（6）——function和bind
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/04/Cocos2dx-practice-03/" rel="prev" title="Cocos2dx项目实战（3）——抢红包">
                Cocos2dx项目实战（3）——抢红包 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/10/04/Cocos2dx-note-23/"
           data-title="Cocos2dx学习笔记（23）——节点类Node" data-url="http://yoursite.com/2016/10/04/Cocos2dx-note-23/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://obkyr9y96.bkt.clouddn.com/560f8f43fbf2b2114886d1e3cd8065380dd78eaf.jpg"
               alt="普罗旺斯的猫" />
          <p class="site-author-name" itemprop="name">普罗旺斯的猫</p>
          <p class="site-description motion-element" itemprop="description">保持微笑:)，一切都会好起来的~</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">75</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/huyinxian" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/5817221614" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/hu-yin-xian" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/Cappuccino_Java" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#版本变化"><span class="nav-number">1.</span> <span class="nav-text">版本变化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#节点类的特点"><span class="nav-number">2.</span> <span class="nav-text">节点类的特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-x版本"><span class="nav-number">3.</span> <span class="nav-text">2.x版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-x版本"><span class="nav-number">4.</span> <span class="nav-text">3.x版本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#节点属性"><span class="nav-number">4.1.</span> <span class="nav-text">节点属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#节点操作"><span class="nav-number">4.2.</span> <span class="nav-text">节点操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动作相关Action"><span class="nav-number">4.3.</span> <span class="nav-text">动作相关Action</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定时器相关schedule"><span class="nav-number">4.4.</span> <span class="nav-text">定时器相关schedule</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#整合NodeRGBA类"><span class="nav-number">4.5.</span> <span class="nav-text">整合NodeRGBA类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#enumerateChildren"><span class="nav-number">4.6.</span> <span class="nav-text">enumerateChildren</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">普罗旺斯的猫</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"fantasticmiao"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

</body>
</html>
